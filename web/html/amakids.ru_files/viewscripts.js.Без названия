$(document).on('pjax:send',function(e){$(e.target).fadeOut(300);$(e.target).parent().append('<div class="loader"></div>')});$(document).on('pjax:end',function(e){var $loader=$('div.loader');$loader.fadeOut(function(){$loader.remove()});$(e.target).fadeIn(300)});window.onload=function(){var timerId=0,searchFuncb=function(e){var val=e.target.value;if(val.length>1){$.ajax({type:"POST",url:"/"+current_lang.split('-')[0]+"/ajaxbodycontacs/",data:{search:val},dataType:"json",success:function(json){json=translateData(json);var $loader=$('div.loader');$loader.fadeOut(function(){$loader.remove()});$(e.target).fadeIn(300);$('#search_result_contacts').html('');if(json.search=='NOT_FOUND'){getTranslateJSON().then(obj=>$('#search_result_contacts').append(''+'<div class="not_found_city">'+'<img src="/img/not_found.svg">'+'<div class="clearfix"></div>'+'<span class="text_not_found">'+obj.country_not_found+'</span>'+'</div>'+''))}else{$.each(json.search,function(index,element){$('#search_result_contacts').append(''+'<li><a href="'+element.url+'">'+element.title+'</a></li>'+'')})}}})}else{$.ajax({type:"POST",url:"/"+current_lang.split('-')[0]+"/ajaxbodycontacs/",data:{all:'yes'},dataType:"json",success:function(json){json=translateData(json);var $loader=$('div.loader');$loader.fadeOut(function(){$loader.remove()});$(e.target).fadeIn(300);$loader.fadeOut(function(){$loader.remove()});$(e.target).fadeIn(300);$('#search_result_contacts').html('');$.each(json.search,function(index,element){$('#search_result_contacts').append(''+'<li><a href="'+element.url+'">'+element.title+'</a></li>'+'')})}})}};$('#search_input_contacts').keyup(function(e){var loader=$("div").is(".loader");if(!loader){$('.city_body').append('<div class="loader"></div>')}
    if($('#search_result_contacts').find('li')){$('#search_result_contacts li').remove()}
    if(timerId)clearTimeout(timerId);timerId=setTimeout(searchFuncb.bind(null,e),550)});$(".cancel-search-contacts").click(function(){$(this).siblings("input").val("");$.ajax({type:"POST",url:"/"+current_lang.split('-')[0]+"/ajaxbodycontacs/",data:{all:'yes'},dataType:"json",success:function(json){json=translateData(json);$('#search_result_contacts').html('');$.each(json.search,function(index,element){$('#search_result_contacts').append(''+'<li><a href="'+element.url+'">'+element.title+'</a></li>'+'')})}})});function popuppartner(e){var
    target=$(e.target).closest(".winner").find(".image-partner"),partner_description=target.attr('data-partner-description'),big_image=target.attr('data-big-image'),partner_name=target.attr('partner-name');$('div.partnerdescription').html(partner_description);$('h2.partnername').text(partner_name);$('.partnerimage img').attr('src',big_image);$(".partner-popup").fadeIn(500);$(".popup-custom-wrapper:not(#partner-popup)").fadeIn(500)}
    $(document.body).on('click','.image-partner, .partner-name-a',popuppartner);var $chooseCity=$(".choose-city-container"),$popupWrapper=$("<div class='popup-wrapper'></div>").appendTo("body");$(".header-city").click(function(e){e.preventDefault();$(e.currentTarget).find('a, .glyphicon-triangle-bottom').addClass('white-over');$chooseCity.show();document.getElementById("search_result").addEventListener('wheel',function(event){if(event.deltaMode==event.DOM_DELTA_PIXEL){var modifier=1}else if(event.deltaMode==event.DOM_DELTA_LINE){var modifier=parseInt(getComputedStyle(this).lineHeight)}else if(event.deltaMode==event.DOM_DELTA_PAGE){var modifier=this.clientHeight}
        if(event.deltaY!=0){this.scrollLeft+=modifier*event.deltaY;event.preventDefault()}});$popupWrapper.append($chooseCity).fadeIn(500).click(function(e){if(e.target===this||$(e.target).parent().hasClass('popup-close')){$(this).fadeOut(500);$('.white-over').removeClass('white-over');$chooseCity.fadeOut(500)}})});searchFunch=function(e){var val=e.target.value;if(val.length>1){$.ajax({type:"POST",url:"/"+current_lang.split('-')[0]+"/ajaxheadcont/",data:{search:val},dataType:"json",success:function(json){json=translateData(json);var $loader=$('div.loader');$loader.fadeOut(function(){$loader.remove()});$(e.target).fadeIn(300);$('#search_result').html('');if(json.search=='NOT_FOUND'){getTranslateJSON().then(obj=>$('#search_result').append(''+'<div class="not_found_city">'+'<img src="/img/not_found.svg">'+'<div class="clearfix"></div>'+'<span class="text_not_found">'+obj.country_not_found+'</span>'+'</div>'+''))}else{$.each(json.search,function(index,element){$('#search_result').append(''+'<li><a href="'+element.url+'">'+element.title+'</a></li>'+'')})}}})}else{$.ajax({type:"POST",url:"/"+current_lang.split('-')[0]+"/ajaxheadcont/",data:{all:'yes'},dataType:"json",success:function(json){json=translateData(json);var $loader=$('div.loader');$loader.fadeOut(function(){$loader.remove()});$(e.target).fadeIn(300);$loader.fadeOut(function(){$loader.remove()});$(e.target).fadeIn(300);$('#search_result').html('');$.each(json.search,function(index,element){$('#search_result').append(''+'<li><a href="'+element.url+'">'+element.title+'</a></li>'+'')})}})}};$('#search_input').keyup(function(e){var loader=$("div").is(".loader");if(!loader){$('.city_head').append('<div class="loader"></div>')}
        if($('#search_result').find('li')){$('#search_result li').remove()}
        if(timerId)clearTimeout(timerId);timerId=setTimeout(searchFunch.bind(null,e),500)});$(".cschead").click(function(){$(this).siblings("input").val("");$.ajax({type:"POST",url:"/"+current_lang.split('-')[0]+"/ajaxheadcont/",data:{all:'yes'},dataType:"json",success:function(json){json=translateData(json);$('#search_result').html('');$.each(json.search,function(index,element){$('#search_result').append(''+'<li><a href="'+element.url+'">'+element.title+'</a></li>'+'')})}})});$('.location-popup').fadeIn(200);$('.location-popup .close').click(function(){$.ajax({type:"POST",url:"/"+current_lang.split('-')[0]+"/ajaxflagsession/",data:{flag:'yes'},dataType:"json",beforeSend:function(){$('.location-popup').hide()},success:function(json){}})});$('#its_ok_city').click(function(){$.ajax({type:"POST",url:"/"+current_lang.split('-')[0]+"/ajaxflagsession/",data:{flag:'yes'},dataType:"json",success:function(json){$('.location-popup').hide()}})});$('#another_city').click(function(){$('div.header-city').trigger('click');$('.location-popup').hide()});$('#search_result li a').click(function(){$('.location-popup').hide();$.ajax({type:"POST",url:"/"+current_lang.split('-')[0]+"/ajaxflagsession/",data:{flag:'yes'},dataType:"json",success:function(json){}})});$(".open-feedback").click(function(){$('.popup-feedback').fadeIn(500);try{toGoalsYandex('ajaxdirectormess','open');toGoalsGoogle('ajaxdirectormess','open')}catch(error){$.getScript("/js/goals.js",function(){toGoalsYandex('ajaxdirectormess','open');toGoalsGoogle('ajaxdirectormess','open')})}});$('.popup-feedback .popup-close').click(function(){$(this).parents('.popup-feedback').fadeOut(400)});$('.popup-feedback').click(function(e){if(e.target===this)$(this).fadeOut(400)});$('[data-open-reg]').click(function(){try{toGoalsYandex('addleadajax','open');toGoalsGoogle('addleadajax','open')}catch(error){$.getScript("/js/goals.js",function(){toGoalsYandex('addleadajax','open');toGoalsGoogle('addleadajax','open')})}
        $('.popup-reg').fadeIn(500)});$('.popup-reg').click(function(e){if(e.target===this)$(this).fadeOut(400)});$('.popup-reg .popup-close').click(function(){$(this).parents('.popup-reg').fadeOut(400)});$('.partner-wrapper .popup-close').click(function(){$(this).parents('.partner-popup').fadeOut(400)});$('.reviews-popup .popup-close').click(function(){$(this).parents('.reviews-popup').fadeOut(400)})};$(document).ready(function(){var selectfl=$('#select_city_free_lesson').find(':selected').data('id'),currcenter='';if(typeof selectfl!==typeof undefined&&selectfl!==!1){currcenter=$('#select_city_free_lesson').find(':selected').data('idcc');$.ajax({type:"POST",url:"/"+current_lang.split('-')[0]+"/ajaxselectadresses/",data:{id:selectfl,curcenter:currcenter},dataType:"html",success:function(options){getTranslateJSON().then(obj=>$('#select_addresses_free_lesson').html('<option value="0">'+obj.select_address+'</option>'+translateOption(options)))}})}});$(document).on('change','#select_city_free_lesson',function(){var id=$(this).find(':selected').data('id');$.ajax({type:"POST",url:"/"+current_lang.split('-')[0]+"/ajaxselectadresses/",data:{id:id},dataType:"html",success:function(options){getTranslateJSON().then(obj=>$('#select_addresses_free_lesson').html('<option value="0">'+obj.select_address+'</option>'+translateOption(options)))}})});function getmergecity($code){$(this).siblings("input").val("");$.ajax({type:"POST",url:"/"+current_lang.split('-')[0]+"/ajaxmergebody/",data:{code:$code},dataType:"json",success:function(json){$('#search_result_contacts').html('');$.each(json.search,function(index,element){$('#search_result_contacts').append(''+'<li><a href="'+element.url+'">'+element.title+'</a></li>'+'')})}})};function getmergecityhead($code){$(this).siblings("input").val("");$.ajax({type:"POST",url:"/"+current_lang.split('-')[0]+"/ajaxmergehead/",data:{code:$code},dataType:"json",success:function(json){$('#search_result').html('');$.each(json.search,function(index,element){$('#search_result').append(''+'<li><a href="'+element.url+'">'+element.title+'</a></li>'+'')})}})};$(function(){var flag=!0;$(window).scroll(function(){if($(this).scrollTop()>=150&&flag){$('.socials-aside').animate({top:'50%'},120);$('.socials-aside').css('bottom','auto');flag=!flag}
else if($(this).scrollTop()<150&&!flag){flag=!flag;$('.socials-aside').animate({bottom:'0'},120);$('.socials-aside').css('top','auto')}}).trigger("scroll")})